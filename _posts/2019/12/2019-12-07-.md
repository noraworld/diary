# お暇をいただきます
このところ、生活習慣が乱れてきている。昨夜は寝るのが 4 時過ぎだったし、昨日の自分の体たらくといったら、それはひどいものだった。家に籠もってずっとゲームしていたし、自分でセットしたタイマースイッチや消灯も破って解除して、夜ふかしして YouTube 見まくったりしていたし。おまけに筋トレや読書も夜中にギリギリになってから始めた。

この生活は早いところ改善しなければならないのだが、一方で、毎日の習慣が負担になってきているとも感じる。最もネックとなっているのが、この「日記を書く」ということだ。なぜなら他の習慣がほとんどスマホで終わらせることができるのに対し、日記だけは PC で書かなければならないのだ。

ブラウザからログインすれば良いだけなので、スマホからでもできるといえばできるのだが、長文は書けないし、何よりネイティブのアプリがないので非常に書きづらいしアクセスするのも面倒だ。

しかも、最近に至っては、Google Keep にメモしたことをただコピペして、昼ごはんや夜ごはんの写真やヘルスケアのスクショなどを貼り付けるだけの単純作業になりがちだった。ただ日記に貼り付けるだけで、結局見るのも自分だけだったら、別に日記に書き写さなくても良くね？...... と思ってしまったのだ。

特に昼ごはんや夜ごはんの写真に関しては、あとから見返したかったら写真を日毎に漁れば良いだけだし、ヘルスケアやうんち記録、あすけんのスクショに関しては、正直スクショだけ貼ってあっても何の参考にもならない。ただデータを羅列するだけでは意味なくて、複数の（数日、数週間、数ヶ月分の）データを収集してグラフ化したりしないと意味がないのだ。

って考えると、今の日記は、ただ公開するためだけに、コピーをそこに貼り付けていくだけのものになっていた。しかもこれが一番手間（PC を使うし、時間もかかる）なので、ここに更新していく意味があるのだろうかと感じてしまった。

とは思いつつも、今まで半年くらい一日も欠かさずに続けてきたので、とりあえず今日は更新するか...... と思ったら、画像をアップロードすることができなくなっていた。

何事かと思いサーバに SSH してみると、なんとディスクがいっぱいになっていた。何が容量を食っているのか調べようにも、`sort` で一時データを保存する必要があるらしく失敗した。

何が容量食っているのか調べなくても、だいたい検討はつく。きっと Mastodon の古い画像が残っているのだろう。そう思い、古い画像を削除するコマンドを実行するも、これも失敗に終わる。PostgreSQL が死んでいた。

どうしたものかと思案していると、そういえばスワップ領域をファイルで確保していることを思いだした。これを消せば解決するかも、と思い、`swapoff` してからスワップファイルを削除した。

結果、見事成功した。すかさず Mastodon の古い画像を削除するコマンドを実行した。しかしやはり PostgreSQL が死んでいて失敗する。

これの解決方法は実にシンプルで、ただ PostgreSQL を再起動すれば良いだけだった。そして 3 度目の正直ということで削除コマンドを実行。見事成功。古い画像を削除することができた。

しかしそれにより空いた容量は 1GB にも満たなかった。そもそもこのコマンドは定期的に cron で実行していて、最後の実行時に容量いっぱいで PostgreSQL が死んで実行できていなかったのだ。その分を消しただけなので、たいした量ではなかった。

となると、もはや本当の意味でサーバのストレージを食い尽くしてしまったことになる。つまり、ストレージを増やすか S3 に移行するしかない、と。

かねてから S3 移行計画は立てていたものの、Mastodon もほとんどやらなくなってしまい、やる必要性がなくなってしまって放置していたのだ。そして、そのまま放置していた結果、ついに今日を迎えたというわけだ。

もう Mastodon 使ってないし、これを機に Mastodon を一旦閉じることにした。消すのはもったいないので、データはそのままに、Mastodon のプロセスを停止させることにしたのだ。ついでに PostgreSQL と Redis も、Mastodon でしか使っていなかったので停止させた。

スワップファイルと Mastodon の古い画像を消したことにより、残り 1G くらいは使用できるようになった。これで、とりあえずは日記に画像をあげることができた。

ここで話をもとに戻すと、日記にメモや画像をコピペするだけでは意味がないと思ったのだった。そしてちょうど、ストレージに空きがなくなった。数日くらいはまだあげられるにせよ、今後、日記にも画像を貼り付けられなくなる。おまけに更新するのが PC からで手間がかかる。

この際だから、日記の書き方を見直してみようと思う。正直、Google Keep にメモとして日記をまとめていくのが良いのではないかと感じた。実際、今のこの日記も Google Keep のコピペにほとんどなっているわけだし。

ここに更新し続けていくメリットとしては、

- 自分の日記を公開できる
    - 人生の証をインターネットに残すことができる
- お手製だから自分が欲しい機能を自由に加えることができる
    - テンプレート機能とかはまさにそうだった（実装は頓挫しているけど）
- 自分で作ったから愛着がある

といったところだろうか。上記 3 つは自分の中では重要な要素だ。特に 3 つめに関しては、日記を見返して愛着を感じたとき、なんともいえない幸せな気持ちになる。

だから、正直なところ、今後も更新し続けていきたい。だが、毎日となるとやはりスマホで完結に、そして簡単に済ませたい。それに、ただのコピペになるくらいだったら、日記のアプリ版を作って、それをメモアプリのように書けるようなものにしたい。

しかし、それを作るのはかなり長い道のりだろう。まず API を作ってから、アプリを 1 から作っていかなければならない。しかも Swift も iOS アプリ開発も全くの初心者なので、勉強するための時間もそれなりにかかる。そうなると、ぶっちゃけ 1 年かかっても完成しないかもしれない。

今すぐに習慣としての日記の書き方を見直すとするならば、既存のものを使うよりほかないだろう。

と、いうわけで、だいぶ前置きが長くなってしまったが、Mastodon と同じく、一旦ここを更新するのはやめることにする。とりあえずは Google Keep にメモするような形で日記を続けていき、もっと良い方法はないか模索していく。この日記のアプリ版を作って、メモ感覚で日記が書けるようにできればそれがベストだとは思うのだが、それを用意するのはだいぶ長い時間がかかる。

この日記システム、結構、というかかなり気に入っていたんだけどなあ。やっぱ時代はスマホだから、ブラウザで更新するのはやっぱり手間になってしまうよなあ。アプリ開発の勉強しよう。

更新は一旦ストップするが、別に永久にこれを使うのをやめるわけではないし、自分のことだから、あるとき急に、やっぱこの日記に書くわ、とか言い出しそうな気もする。アプリをもし作ってそれが出来上がればまた戻ってくることにはなるだろう。

でも、Mastodon も日記も一旦使わなくなるとなると、サーバはただデータを持っているだけになってしまうな。ブログも更新していないし。

ってなると、もうサーバで何かを運用するのはやめて、すべて既存のもので賄うのもありなのかなとも思い始めてきた。ブログなら GitHub Pages という優秀な基盤があるし、ポートフォリオも GitHub Pages で良いし、Mastodon は Twitter で良いし（おいおい、それを言っちゃ元も子もないだろ...... というのは置いといて......）。

自分でシステムを構築して管理したり運用したりしていくのは結構手間がかかるということがわかった。データも突然消えてしまうことも考慮して定期的にバックアップしないといけないし。その点、GitHub Pages とかならそういった心配もいらない。

うーん、自分で作るのが最高！ とか言っていた昔の自分はどこへ言ったのやら......。

なんか思考の垂れ流しみたいになってきたが、そういうことで、明日からはここではなく、Google Keep に書いていく。プライベートになってしまうが、別にこの日記を見るのは自分くらいしかいないだろうし変わらないだろう。

結局、途中まで作っていたテンプレート機能は、使わなくなっちゃいそうだなあ。結構がんばって良い感じのものを作っていたんだけどなあ......。しかもあの機能は、感謝日記とか気分日記とかを書くには最高の機能だと思うんだけどなあ......。アプリ作って早くこの日記を復活させたいなあ......。

一応、今日もごはんの写真などは貼っておく。

# 昼ごはん
![4ced4ee97c64e7f9](/images/2019/12/4ced4ee97c64e7f9.jpg)

# 夜ごはん
![549452c4fb2b0ee5](/images/2019/12/549452c4fb2b0ee5.jpg)

# うんち記録
![422fc596d9493de4](/images/2019/12/422fc596d9493de4.png)

# ヘルスケア
![9ac0ad8e9af5ee91](/images/2019/12/9ac0ad8e9af5ee91.png)

![b02db67b268cf63a](/images/2019/12/b02db67b268cf63a.jpg)

ヘルスケアアプリのスクショはもう撮らない。あれ撮ってもあんまり意味ない気がしてきた。少なくとも 1 週間単位で運動や食事のレベルが良いかどうかを見ないと意味ない気がする。
