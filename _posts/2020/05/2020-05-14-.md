# macOS 風キーバインド・改
昨日に引き続き、Windows 10 のキーバインドを AutoHotKey でいじっていた。

昨日の時点で Emacs 風のカーソル移動はできるようにはなったが、キーを押しっぱなしにする（カーソルを移動し続けようとする）と、たまにおかしな挙動になる（`Alt + F` を押しっぱなしにすると、文章内に `f` が混ざったり `Ctrl + F` になってしまったりする）問題が発生していた。

これは、キーボードの反応が速すぎるために、AutoHotKey の処理が追いつかないのが原因だということがわかった。

[AutoHotkey の連続入力に失敗する](https://blog.goo.ne.jp/koyusoma5102/e/49bf74e1c467f23a71919a9ce9391f87)

なので、上記の記事の説明にある通り、Windows の設定でキーボードの表示の間隔を少し遅くすることで解決できた。バーを、一番右の「最速」の状態から、左に 7 段階遅くした。

他にも、Windows 10 では Alt キー単体で押すとメニューバーにフォーカスしてしまい、現在入力しているフォームからフォーカスが外れてしまったりして使いづらかったので、Alt キー単体押しのときはそれを無効化するようにしたり、`Ctrl (Alt) + Space` で IME の有効・無効を切り替えられるようにしたり、`Command (Ctrl) + Shift + 4` で macOS と同様にスクリーンショットの範囲指定ができるようにしたりした。

そしてそれを [GitHub](https://github.com/noraworld/dotfiles/blob/767d757fa65cef3fc2bb6bb1834d20627b3ca410/windows/ahk/macos.ahk) にあげた。

依然として「英数」「かな」キーが効かなかったり、`Ctrl (Alt) + A` や `Ctrl (Alt) + E` で行頭や行末に移動する際に、改行していなくても次の行に移動してしまっている場合はそこまではカーソルが移動してくれない（あくまでそこに表示されている一行分の一番右にカーソルが移動する）などの細かい違いがあるが、ある程度は macOS に似せることができた。これで Windows でもそれほどストレスなくこのように文章を書くことができるようになった。

GitHub にあげる際にターミナル操作が必要だったので、Windows Subsystem for Linux (Bash on Ubuntu on Windows) も使ってみた。擬似的感は否めないが、dotfiles を更新する程度には差し支えないだろう。開発はやはり macOS のほうが良いと思う。
