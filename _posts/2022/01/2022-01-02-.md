---
layout: post
title: "2022-01-02"
date: 2022-01-02 13:23:16 +0900
---

# 本当に寒い
今冬は本当に寒い。去年こんなに寒かったっけか？ と思い、SwitchBOT 温湿度計の去年の室温のログを見てみたが、ふつうに 20 ℃ 以上あった。これはもちろんエアコンをつけるときの温度だろうけど、今冬は寒すぎてエアコンつけてもここまで温度が上がらない。

で、エアコンのリモコンを見直してみた。風速最大で暖房 29 ℃ の設定になっている。別に設定し間違えているわけではない。

と、ここで、「パワフル」というボタンを発見。前から認識してはいたが、こんなに寒さに苦しむ年がなかったので完全に忘れていた。試しにこの「パワフル」というのを使ってみることにした。ここに住んで 3 年 9 ヶ月くらいして初めて使ったかもしれない。まああと 2 日で引っ越すんだけど。

エアコンの音はうるさくなったが、その分、たしかに温度の上昇は早くなった。まだオンにしてから数十分しか経ってないのでどこまで温度が上がるかはわからないが、効果はあるようだ。

あと 2 日はこれで乗り切ろう。引っ越し先はもっと寒いだろうから向こうのエアコンでもこういう設定がないと厳しそうだ。

電気代？ そんなもん知らん。寒いストレスには変えられない。

## 追記
パワフルモードにしてからしばらく経った。最初が何度くらいだったか覚えていないが、18.0 ℃ まで上がってだいぶ暖かくなった。やはりパワフルの効果は十分にあった。

これ以上暖めても意味ないので 18.0 ℃ まで上がったところでパワフルはオフにした。

というか一気に室温が上がりすぎてちょっとだけだるくなってきた。

ところで、SwitchBot の温湿度計のログが 2021/11/25 で止まっている。だから今日の分も取れていないし、エラーメッセージが出るようになってる。いったいどうしたんだ 🤔

## 追記 2
一度 18.0 ℃ になってからはパワフルモードをオフにしてもあまり下がることはなかった。やはり一度温度を上げておけばエアコンは温度を保ちやすいようだ。





# デジタル → アナログ → デジタル
マキタの充電式インパクトドライバーの取扱説明書を電子化したのだが、ここでふと思った。

この取扱説明書を作っているのは企業で、企業は PC で取扱説明書を作って、それを紙に印刷している。そして自分はその紙を分解して、電子化している。

もともとデジタルなものをアナログに変換して発売して、購入したものを自分でまたデジタルにする、っていう全体で見ると無駄な行動をしているなと思った。

最初から電子データとしてダウンロードできるようにしておけば良いのに。というかもう髪とか要らなくない？




# Kindle Unlimited は迷わずガンガン使え
さっき NEW GAME! 7 巻を読もうとしたら、ふつうに有料になっていた。6 巻までは Kindle Unlimited で無料で読めたのに。

これは 7 巻からは対象外というより、期間限定だった可能性が高い。タイミングからして、2021/12 は全巻が対象だったが、月が変わって対象外となってしまったようだ。

調べてみると Kindle Unlimited は月替わりの本があった。おそらくこれに該当するものだったのだろう。

せっかく無料で読めると思って楽しみにしてたのに残念 😭

ここから得られる教訓としては、「Kindle Unlimited は迷わずガンガン使え」だな。マンガとかは、とりあえず先に全巻借りちゃったほうが良いかも。今回も、とりあえず先に全巻借りておけば最後まで無料で読めたはずなので。

7 巻以降、どうしようかな。正直、無料だから読んでたっていうところもあるけど、続きを見たいという気持ちもある。





# bluetoothctl-autoconnector の改良
今日は、一日中、音楽を聴きながらダラダラと bluetoothctl-autoconnector の改良などをやっていた。

Raspberry Pi を再起動すると、クライアント側から Bluetooth 接続が失敗するという問題が発生する。たとえば MacBook Pro 側から Raspberry Pi と Bluetooth 接続したくても、Raspberry Pi を再起動してから一度も MacBook Pro と接続していない場合、MacBook Pro 側からの接続が必ず失敗する。

その度にいちいち Raspberry Pi に SSH して Raspberry Pi 側から接続するのが面倒だと前々から感じていた。

なので、いい加減、それを改良することにした。

`marlin` コマンドに `--retry NUMBER` というオプションを新たに実装して、`NUMBER` で指定した数値分だけ再試行を繰り返すようにした。指定しなかった場合、つまり従来は、接続が成功するまで永遠に繰り返す仕様になっている。このオプションをつけることで、接続がうまくいかなかったら諦めることができるようになった。

なぜこの改修を加えたのかと言うと、Raspberry Pi の再起動時にすべてのデバイスと自動的に接続するようにするためだ。cron で再起動時にすべてのデバイスと接続するコマンドを実行したいのだが、その際に、たとえば MacBook Pro がスリープ状態だったりすると接続が失敗するが、永遠に接続を繰り返すのは困る。なので、数回繰り返したら終わるようにしたかった。

再起動後に、Raspberry Pi 側から、一度でも、そのデバイスと接続「しようとした」ら、次回以降は、そのデバイス側からでも Raspberry Pi に接続ができるようになる。この「しようとした」というのがポイントで、別にこの時点では接続が成功しなくても良い。ただ、Raspberry Pi 側からそのデバイスへの接続要求が、再起動後に一度でも行われていれば問題ないのである。

それをするために `marlin` コマンドと cron のスクリプトに修正を加えた。試しに Raspberry Pi を再起動して動作確認してみると、ちゃんとすべてのデバイスと接続しようとしていて、その後、MacBook Pro 側から接続したらうまくいった。先に BlueZ や PulseAudio のデーモンが起動していないといけないから、タイミング的に失敗するかもしれないと危惧していたが、杞憂だったようだ。ただ cron に再起動時のスクリプト実行をセットするだけでうまくいった。

あとは、なぜか `~/.marlin_aliases` が envsman で管理されていなかったので、ファイルを移動させてトラックした。

それから、Starship の hostname の色を明るくて太くて目立つ色にした。SSH のときに、より SSH 先のプロンプトであることをはっきりさせるためだ。

音楽を聴きながらのんびりやっていたので、進みはとても遅かったが、前からやろうと思っていたことを消化できたので良かった。















