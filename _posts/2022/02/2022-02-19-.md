---
layout: post
title: "2022-02-19"
# date: "2022-02-19 12:46:58 +0900"
---

# ネット断食再開
前回、YouTube とそれ以外の動画サービスでネットワーク制限する日を分けられる機能を追加して以来、ネット断食カウンターがリセットされてしまったが、今日からまた本格的に運用が開始する。

YouTube 以外が見られなくなっていることは水曜日の時点で確認済み。そして今日からは YouTube も金曜日以外は見られなくなる。







# リングフィットアドベンチャー
第 269 回目。

<iframe width="560" height="315" src="https://www.youtube.com/embed/PVjts77iNgg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>






# 認知シャッフル睡眠法システム構築計画
今日は認知シャッフル睡眠法を自動でやってくれるシステムを構築しようとしていた。といっても作業自体には全く着手できていなくて、MeCab の名詞ファイルを精査したり、ライセンスについて調べたりしていた。

前から構想は練っていたが、今までは夜は YouTube を制限していなかった関係上、YouTube の ASMR 動画を流しっぱなしにしておけば良かったので、作るモチベーションを失っていた。

しかし、今は夜でも YouTube を見られないようになっているので、Raspberry Pi に認知シャッフル睡眠法をやってもらおうという寸法だ。

今作ろうとしているものを簡単に説明するとこうだ。

1. MeCab の辞書の名詞一覧ファイルを用意する
2. 乱数を発生させて出てきた数字に該当する行番号にある名詞を Open JTalk で読み上げる
3. これを朝になるまでひたすら繰り返す

かなりシンプルなシステムだ。

# YouTube の ASMR 動画自動再生システム構築
上述のシステムが出来上がるまでの間、とりあえず YouTube の ASMR の認知シャッフル睡眠法の音声を Raspberry Pi に再生させてみることにした。

はじめは mps-youtube で動画の音声データをダウンロードしてこようとしたが、どうもうまくいかない。検索できないのは調べたら API キーを自分で発行しなければならないということで解決したが、「認知シャッフル睡眠法」と検索するとなぜか検索に失敗する。「認知シャッフル睡眠」とか、別の単語ならうまくいくのに、「認知シャッフル睡眠法」だけうまくいかない。

そして、ダウンロードしたかった動画もなぜか検索にヒットしない。別に年齢制限がかかっている動画というわけでもないのに。完全に謎。

というか mps-youtube はかなり使いづらい。YouTube の ID (URL の一部) をそのまま指定してダウンロードとかができない。いったん検索して、検索結果に付属する数字を指定してダウンロードすることしかできない。しかも検索でヒットしない動画がある。超絶不便。

というわけで、大学時代にお世話になっていた、YouTube 動画の MP3 音声をダウンロードする Mac 用のアプリをインストールして、Mac でダウンロードした MP3 ファイルを scp で Raspberry Pi に送って解決した。

aplay コマンドで MP3 を再生できるのかな、と思い試してみたがダメだった。ノイズしか聞こえなかった。

そこで、新たにライブラリをインストールして、play コマンドを実行するとちゃんと MP3 を再生することができた。

ダウンロードしてきた ASMR 認知シャッフル睡眠法の音声をバックグラウンドで再生するスクリプトを作って、そのスクリプトを iOS のショートカットアプリで実行するようにしてみた。どうやるのか知らなかったが、ふつうに SSH でコマンドを実行するやつがあった。

ここでも一悶着あって、バックグラウンドで実行しているのに、なぜかショートカットが終了しない問題が発生した。

これに関しては未だによくわからないが、標準エラー出力を標準出力に混ぜて `/dev/null` に送ったら解決した。

これで、iPhone に向かって "Hey Siri, good night" と言うと Raspberry Pi から音声が再生されるようになった。

今はまだこれだけしかできないが、将来的にはこれも機能拡張して、複数の音声からランダムに選択したり、何時までは連続で再生し続けたりできたら良いかなと思ってる。

...... もう認知シャッフル睡眠法のシステムいらないのでは？ という気持ちにもなってきた。まあ作る予定だけど。





# オープンソースを改変する場合の著作権表示について
記事書いた。

https://zenn.dev/noraworld/articles/license-copyright

ライセンスのことよく知らなかったので軽く調べた。

MeCab の辞書を、これから作る認知シャッフル睡眠法システムのリポジトリに組み込みたいなと思っていて、著作権者の表示はどうすれば良いのかわからなかったので調べた。




















