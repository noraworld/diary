# スーパーと荷物
現在午前 8 時半で、まだ寝ていないが翌日の日記として更新する。

夜中はずっとネットワーク制限強化をしていてプロテインとシリアル 1 杯以外何も食べていなかった。そして完全に夜が明けてもまだ眠くないし小腹が空いてしまったが特に食べるものもない上にはちみつも切れてしまっていたので、朝の 8 時ごろにまいばすけっとに行った。

帰宅後に、昨日宅配ボックスに届いていた Amazon の荷物もろもろを受け取った。

久しぶりの朝日を浴びた。



# `ssh.github.com` を無効化
GitHub のウェブページ側から YouTube の制限開始時刻を延長できないように、5 〜 9 時は `github.com` にアクセスできないようにしていたのだが、日記の更新等で push は行えるようにしておきたかったので `ssh.github.com` は許可していたが、今回これも無効化することにした。

理由としては、結局これって iPhone のモバイル通信で GitHub 上のデータを書き換えて `git pull` してしまえば上書きできてしまうからだ。尤も現在 Raspberry Pi 自身は `1.1.1.1` を使用しているので意味ないが、いずれはこれも自分自身 (Dnsmasq) を参照するようにして完全に変更不可にできるようにしたいと思っている。

Mac からは push もできなくなったので正しく機能している。まあ逆に `ssh.github.com` を許可するように意図的に設定を加えているので動作するのは当然なのだが。



# やらかした
今日、仕事で突発タスク対応が来た。他の人にもメンションが飛んでいて、誰か手が空いている人にやってほしいという形式で依頼されていた。

今日は一睡もせずにお昼を迎えたのだがそれでもあまり眠いという感じではなく暇していたし、速攻で終わりそうな内容だったので自分が対応することにした。しかしこれが悲劇だった。

ただ単に特定のレコードのタイトルのカラムを指定のものに変更するってだけだったんだけど、ID を指定し忘れて該当テーブルの全レコードのタイトルを変更してしまった。具体的には `UPDATE <table_name> SET title = "<title>" WHERE id = <id>` とすべきところで、`WHERE id = <id>` を指定し忘れたせいで全レコードに対してタイトルを変更してしまった。

最近全然突発タスクをやっていなかったし一睡もしていなくて注意力が散漫になっていたので完全に油断した。しかもそれをやらかしたことに自分では気づかず、あとから他のレコードもタイトルが変わっちゃっているということを Slack で連絡されてようやく気づいた。

そのあとはチームメンバー全員に集まってもらって対応してもらった。Athena を使って問題発生直前の DB の状態で SQL を発行し ID とタイトルを JSON でダウンロードして ActiveRecord に変換したものを実行するというかたちで再びタイトルを正常なものに戻すことができた。

そもそも `WHERE` 句を指定し忘れたら全レコードに対して何の警告もなく同じクエリが実行されてしまうという SQL がやばすぎるのだが、今後は気をつけるようにしよう。SQL じゃなくて ActiveRecord で実行していればこのような問題は発生しなかったはずなので今後はそっちを使うことにしよう。

ちなみになぜ ActiveRecord ではなく SQL を実行していたのかといえば、バリデーションエラーが発生しそうだと思っていたからだ。でも `validate: false` をオプションに加えれば ActiveRecord でもバリデーションを飛ばすことができる。

その後、トラブル報告をする必要があったのだが初めての経験でそもそもツールのログインすらしたことなくログインできなかったのでこれも他のメンバーに半ば丸投げという感じになってしまった。本当申しわけない……。

あんまり調子乗ってこういうの引き受けないほうが良いな。いや、全然調子乗っていたわけでもなんでもないのだが、最近めっちゃ仕事をサボってしまっていたからこれくらいはやろうかなという気持ちが完全に裏目に出たって感じだ。

なんやかんやあって今日は夕方くらいまで全く寝ずに起きていた。その間、ダラダラしながらではあるが仕事もちょっとだけ進めて、ようやく Ruby アップデートの PR を出すことができた。

夕方になって眠気でだるくなったのでちょっと仮眠してから Cambly のレッスンを受けて退勤した。仮眠したといっても全然寝ていない状態からの仮眠なので気だるさはまだ残っている。今日は早く寝よう……。



# Cambly lesson with Tevin
今日は眠気があってあまりうまくしゃべることができなかった。話題に関しては基本的に Tevin がいろいろと質問してくれてそれに答えるかたちだったのであまり困らなかった。ただ、今日の質問は「小学校はどうだったか？」とか「学生時代は制服などを着ていたか？」など割と今までにしたことのないトリッキーなものだったので聞き取りがスムーズにいかなかった。



# モニターがやっと売れた
スタンドを組み立てる前あたりに 60,000 円くらいに値上げして、その間来ていたコメントもほぼ値下げ交渉ばっかりでうざかったので片っ端からブロックしていた。

ところがスタンドを組み立てていざいつでも売れるという状態になったあとはめっきりコメントも来なくなり全然売れなくなってしまった。すぐに 50,000 円には戻したが全然売れず 1 週間くらい経ったのでここ数日間で 1,000 円ずつ値下げして、今日、46,000 円で売れた。

50,000 円だったときに結構コメントが来ていたのでその段階で放っておけばたぶん売れていたんだろうけど、中途半端に 60,000 円に値上げしたり値下げ交渉野郎をブロックしたりしていたせいで売れるのが遅れただけでなくそれ以上に値下げをする羽目になってしまった。

もうメルカリ卒業したい。モノ買わなければメルカリでヤキモキする必要もない。

なお、集荷は 3 月 1 日の 15:00 〜 18:00 に設定した。最速が 3 月 1 日だったので。それまでの間にケーブルやリモコンが輸送中に分離しないようにまとめておこう。
