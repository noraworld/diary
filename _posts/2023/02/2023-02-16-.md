# tmux をやめた
今まで割と長いこと tmux を使っていたけどついに使うのをやめた。やめたといってもシェル起動時に自動的に tmux が起動するのを無効化しただけなので、手動で `tmux` コマンドを実行すれば使えるんだけど、まあたぶん使うことはないだろうな。

もともとはシェルの出力を自動的にすべてファイルに記録するために `script` コマンドを使っていた。しかしこのコマンドは macOS では BSD のもので、しかも最近の macOS 環境でも未だに 2013 年のビルドバージョンのものが使用されている。いちばん致命的だったのは、ウィンドウのサイズを変更したときに、更新後のウィンドウサイズを再取得してくれず、`less` や `vim` などのコマンドを実行したときに表示が崩れてしまうのだ。

GNU 版の `script` コマンドなら問題ないはずなのだが、残念ながら macOS に GNU 版をインストールすることはできない。そこで代替手段を探していたところ、tmux にその機能があることを知ったのだ。

しかし、tmux を使い始めてからはおろか、`script` コマンドを使用していたときからシェルの出力の履歴なんか見たことがない。全部記録されていたほうが後々何かを振り返りたいときに便利なんじゃないかと思っていたんだけど、実際には振り返る機会なんかまったくなかったというわけだ。

かといってこの履歴ファイルはバックアップするわけでもない。もしバックアップするとなったら膨大な行数の大量のファイルになってしまうので管理も大変なのだ。そう、仮に見返すことがあったとしても行数が多すぎるのとカラーシーケンスなどをうまく避けて検索 (`grep` など) するのも大変なのだ。

tmux の使い始めるきっかけはもうこのシェルの記録だけだったので、正直使いづらいところもあった。だけど今までは目をつむっていた。しかし今日、仕事でシェルを使っているときに、画面が派手に消えてしまうバグが発生したのだ。説明が難しいが、何かコマンドを入力している最中じゃないと今までの表示が消えてしまう現象が発生した。

これは今に始まったことではなくずっと昔から発生していた事象ではあるのだが、今回のが一番ひどかった。ウィンドウを 3 分割していたのだが、あまりにもこのバグの影響で画面が見づらくなったのでいったんすべて閉じてもう一回開き直す羽目になった。その面倒くささを感じたとき、あれ、いったい何のために tmux 使っているんだ？ と気づいてしまったので使うのをやめることを決めた。

このバグだけでなく、今まで使いづらいと感じていたところはいくつもある。

* トラックパッドによるスクロールが若干遅いので履歴を振り返るのがめんどくさい
* マウスカーソルで範囲選択するとコピーはされるが自動的にスクロールが戻ってしまう
    * それを解決する Qiita 記事を見つけて設定を入れてみたのだがなぜか解決せず
* tmux のコマンドを入力するとき、全角モードになっているとうまく反応しない
* ちょっとでも上にスクロールした状態だと `q` を押さないともとの位置に戻れない
    * そしてこれも全角モードだとうまくいかない

ざっと挙げるだけでもこれくらいある。これに加えて画面が消えるバグがある。それでも tmux を使っている理由がシェルの履歴の記録だけで、それも全く活用はしていないしバックアップも取るつもりはない……。そう考えると何のために tmux 使っているんだろうという気持ちになるのも不思議ではない。

シェル起動時に tmux を開くためのスクリプトはそのまま残し、ただ単にそのスクリプトをシェル起動時に読み込まないようにしただけなので、もとに戻すのは簡単にできる。

久しぶりに tmux なしでシェルを起動してみたのだが、驚くことにシェルが結構軽くなった。M1 Mac の性能が優秀なので別に今まででも遅いと感じていたわけではないのだが、それ以上に速くなったのでちょっとだけ感動した。そして上で挙げた問題も、当たり前だが解消されたので結構スッキリした。



# IPv6 を無効化した
引越し前の八王子の家で、Raspberry Pi をルータにしつつ一時的に IPv6 をオンにしていたときがあったけど、結局 IPv6 あってもなくてもそんなに変わらんなと思っていたのに加えて、引っ越してから IPv6 の設定をするのがなんかめんどくさくなっていたのでそのまま放置していた。

でも、プロバイダから Raspberry Pi には IPv6 が降ってきていたので無効にした。別に無効にしなくても実害はないのだが、使わないものを与えられてもなあという感じだったので。



# インクリメンタルリジェネレーション
[14 日の日記で Jekyll のインクリメンタルリジェネレーション](/2023/02/14#インクリメンタルリジェネレーションを有効にしようとしたが)について調べた。その結果、結局プライベート日記を更新してもその後に通常日記を更新しないとサイト側には反映されないということがわかったのでその時点では断念した。

しかし、やっぱりこのインクリメンタルリジェネレーションは魅力的だ。なにせ都度のビルド時間が 30 秒から 2 秒程度になるのは劇的な改善だからである。プライベート日記単体では更新が反映されないという問題はあるものの、この機能を有効にすることにした。使い勝手が悪かったらまたもとに戻すかもしれない。



# Cambly lesson with rhondale
このところあまり元気がないなあと思っていたら、どうやらインフルエンザにかかっていたらしい。幸い今は快方に向かっているらしい。

今日の会話はこんな感じ。

* ワーキングホリデーの説明会について、ワーキングホリデーについて、ワーキングホリデー後のプランについて
* PS5 が欲しいけど高いからまだ買えないという話
    * 300 ドル以下で買おうと思っているが、中古でも 400 ドルくらいするらしい
* 子供がマインクラフトをやっている話
