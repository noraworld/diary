---
layout: post
title: "2021-12-25"
---

# とりあえず新しい日記公開
クリスマスの、しかも夜 10 時に新しく日記サイトを公開する。

日記自体は [diary.noraworld.com](https://diary.noraworld.com) というドメインで 2016 年 8 月 10 日からインターネット上で公開している。自分で 1 から作った日記システムということもあり、かなり気に入ってはいたのだが、大切な日記のデータを GitHub で管理し、サイト自体も自分がサーバを管理できなくなったとしても公開し続けられるように GitHub Pages で公開しようと決めた。将来的にはあらゆるデータをできる限り GitHub 上で管理しようと考えている。

[diary.noraworld.com](https://diary.noraworld.com) (以下、旧日記サイト) にあるデータも、ゆくゆくはこちら側にすべて移行しようと思っているが、インポート用の機能などをまだ実装していないので、とりあえずはこの記事からこの日記をスタートさせることにする。

つまり、この日記 (2021/12/25) よりも前にある日記に関しては、旧日記サイトからインポートしたものと、Google Keep などにとりあえず書き残しておいた日記形式の文章と、思い出せる範囲で遡って書いたもの、のいずれかである。GitHub Pages を立ち上げてから最初に公開したのは今日のこの内容である。

コンセプトは昔と変わらず、日々の出来事や思ったことをただ綴るのみ。日常を記録として残すためだ。

前々から GitHub に日記を移行しようとは思っていたが、このタイミングで日記を始めた理由は、iPhone で気軽に日記が更新できそうなアプリを見つけたからだ。Working Copy という名前のアプリだ。これに関しては、今日、ブログ記事でも書いた。そのブロク記事はこのアプリから更新している。ちなみに今のこの文章は、GitHub Pages の環境構築のついでとして Mac で書いているが、今後は iPhone からも更新する予定だ。

日記を毎日更新するためには気軽さが必要である。しかし、PC からしか更新できないとなるとやはり続かない。なので、iPhone からも更新できるようにしたいが、公式アプリではコミットやプッシュができない。

なので、自分で 1 から専用のアプリを作る必要があるのかなと思っていたのだが、調べてみたらこの Working Copy というアプリが見つかって、これなら iPhone からでも気軽に毎日更新できそうだと思った。

そして、始めるなら早いほうが良い。旧日記サイトの移行を待っていては、始めるのがだいぶ遅れてしまうだろうし、その間にも日々の記録はどんどん失われてしまう。今日の出来事は今日残しておかないと、一生残らない。だからこそ、始めるならとにかく早いほうが良いと思い、このアプリをインストールした今日、この日記を始動させることにした。

# フォーマット
毎度おなじみ Jekyll を使ってビルド & サーブするので、ある程度は Jekyll の作法に従わないといけないが、毎日更新する日記で細かいフォーマットを気にしていては、やはり続くものも続かない。なので、なるべく簡略化して更新できるようにする。

## ディレクトリ構造とファイル名
幸いにも、`_posts` ディレクトリの中にあるファイルは、その中のディレクトリ構造がどうなっていようがすべて読み込まれるようになっている。なので、`_posts/yyyy/mm/yyyy-mm-dd-.md` のような形式でファイルを作成する。たとえば今日のこの日記記事なら `_posts/2021/12/2021-12-25-.md` になる。

拡張子の直前の `-` は、本当はつけたくなかったが、これがついていないと認識してくれないので仕方なくつけている。というより、本来は `yyyy-mm-dd-title.md` のように、日付の後ろにタイトルが必要なのだが、日付とタイトルを区切るハイフンが入ってさえいればタイトル自体はなくても大丈夫だということがわかったのでこの運用にすることにした。日記にタイトルをつけるのは変だし、毎回つけようとするとそれはそれでめんどくさくて更新しづらくなる原因なのでつけないことにする。旧日記サイトでもタイトルはつけていなかった。

## YAML ヘッダ
残念ながら YAML ヘッダはつけなければならない。毎日更新したいので、本文だけで済ませたいところだが、これがないとまともに表示されない。

`jekyll new` したときに自動生成されるサンプル記事の YAML ヘッダを掲載する。

```yaml
----
layout: post
title:  "Welcome to Jekyll!"
date:   2021-12-25 19:54:18 +0900
categories: jekyll update
----
```

`layout` は必須だ。これがないとその記事のページがプレーンとして表示されてしまう。サイトのヘッダやフッタなどが全部消えてしまう。それはいくらなんでも許容できない。

`title` もつけておかないと、記事へアクセスするためのリンクが表示されなくなってしまう。ファイル名にタイトルを入れていて `title` を省略した場合は代わりにファイル名のタイトルを代用する仕様になっているが、今回はそのファイル名のタイトルを省略しているので、こちらの `title` は省略不可だ。

とはいえ、ちゃんとしたタイトルにするつもりはない。`"yyyy-mm-dd"` としておけばいつの日記なのかがはっきりするのでこれで充分だろう。

`date` に関しては要らないだろう。あとから、いつ公開したものなのかを知りたくなるときがあるかもしれないが、コミット時の日時が残るので問題ないだろう。

一応、未来の日付にしておくことで、それまで公開されないようになるが、とはいえその日付になったら自動的に公開されるわけでもなく、次にコミット・プッシュしたときに公開されるので、いわゆる未来投稿的な機能とは少し異なる。

最後に `categories` だが、これは言うまでもなく不要だ。

というわけで、YAML ヘッダは最低限このようになっていれば良い。

```yaml
---
layout: post
title: "2021-12-25"
---
```

実にシンプルだ。

まあ今後、付け足したくなるものも出てくるかもしれないが、最初からそれを考えても仕方ない。仮に付け足すとしても、めんどくさくならないように、とりあえず `layout` と `title` だけあれば機能するということは覚えておこう。

iPhone から更新する場合はそもそもこれすらめんどくさい気もするが、ここらへんはサードパーティ製キーボードアプリのテンプレートなどを駆使すればなんとかなるだろう。そう考えると、別にめんどくさくならない可能性もあるので、最低限にしなくても良いのかも。まあそれは追々使ってみてわかってくるだろう。

# おわりに
ざっとこんなところだろうか。今回は初回 & Mac から更新ということもあり割としっかりめに書いているが、普段はもっとラフに書いていく予定だ。それこそ見出し (`#`) とかも使わずに、淡々と文章を書き殴っていくだけになるだろう。そのほうが筆記開示の効果にもつながって頭の中の整理にもなるだろうし、まさに「日記」って感じがする。

とにかくあまり深いこと考えずに気楽に続けていこう。
